<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/22" xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="com.ptit.ticketing.ui.MovieListController"
    prefHeight="800.0" prefWidth="1200.0"
    style="-fx-background-color: #f5f7fa;">

    <!-- Top: Header -->
    <top>
        <VBox
            style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-padding: 20 30;">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <!-- Back Button (only for admin) -->
                <Button fx:id="backButton" text="← Back" onAction="#handleBack" visible="false"
                    managed="false"
                    style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-weight: bold;">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Button>

                <Label text="🎬" style="-fx-font-size: 32px;" />

                <VBox>
                    <Label fx:id="titleLabel" text="Browse Movies"
                        style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;" />
                    <Label text="Select a movie to view showtimes and book tickets"
                        style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 13px;" />
                </VBox>

                <Region HBox.hgrow="ALWAYS" />

                <!-- My Bookings Button -->
                <Button text="📋 My Bookings" onAction="#handleMyBookings"
                    style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-weight: bold;">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Button>

                <!-- Settings Button -->
                <Button text="⚙️ Settings" onAction="#handleSettings"
                    style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-weight: bold;">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Button>

                <!-- Logout Button -->
                <Button text="Logout" onAction="#handleLogout"
                    style="-fx-background-color: rgba(231, 76, 60, 0.9); -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-font-weight: bold;">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Button>
            </HBox>

            <!-- Search Bar -->
            <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 20 0 0 0;">
                <Label text="🔍" style="-fx-font-size: 20px;" />
                <TextField fx:id="searchField" promptText="Search movies by title..."
                    style="-fx-background-color: white; -fx-background-radius: 8; -fx-padding: 12; -fx-font-size: 14px;"
                    prefWidth="400">
                    <font>
                        <Font name="System" size="14.0" />
                    </font>
                </TextField>
                <Label text="Press Enter or start typing to search"
                    style="-fx-text-fill: rgba(255,255,255,0.8); -fx-font-size: 12px;" />
            </HBox>
        </VBox>
    </top>

    <!-- Center: Movies Grid -->
    <center>
        <ScrollPane fitToWidth="true"
            style="-fx-background: #f5f7fa; -fx-background-color: #f5f7fa;">
            <VBox style="-fx-padding: 30;">

                <!-- Movies Container -->
                <FlowPane fx:id="moviesContainer"
                    hgap="30" vgap="30"
                    alignment="TOP_LEFT"
                    style="-fx-padding: 10;">
                    <!-- Movie cards will be added here dynamically -->
                </FlowPane>

            </VBox>
        </ScrollPane>
    </center>

    <!-- Bottom: Footer -->
    <bottom>
        <HBox alignment="CENTER" style="-fx-padding: 15; -fx-background-color: white;">
            <Label text="© 2025 Cinema Management System"
                style="-fx-text-fill: #7f8c8d; -fx-font-size: 11px;" />
        </HBox>
    </bottom>

</BorderPane>